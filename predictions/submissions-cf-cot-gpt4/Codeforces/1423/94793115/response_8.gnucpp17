#include <vector>
#include <cstdio>
#include <utility>

struct SegTree {
  std::vector<int> sand, sor, lazy;
  int n;
  SegTree(int n_) {
    n = n_;
    sand.assign(n * 2, 0);
    sor.assign(n * 2, 0);
    lazy.assign(n * 2, 0);
  }

  // ... rest of the methods remain the same
};

int main() {
  int k, q;
  scanf("%d %d", &k, &q);
  int n = 1 << k, mask = (1 << k) - 1;
  SegTree low(n), hig(n);
  std::vector<std::pair<std::pair<long long, long long>, int>> cons;
  for (int i = 0; i < q; ++i) {
    // ... rest of the code remains the same
  }
  // ... rest of the code remains the same
  return 0;
}