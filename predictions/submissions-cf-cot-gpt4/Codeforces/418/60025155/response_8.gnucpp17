#pragma GCC optimize("O3")
#pragma GCC target("sse4")
#include <bits/stdc++.h>
#include <ext/pb_ds/assoc_container.hpp>
#include <ext/pb_ds/tree_policy.hpp>
#include <ext/rope>
using namespace std;
using namespace __gnu_pbds;
using namespace __gnu_cxx;
// ... (the rest of your code remains the same)

// Optimization 1: Replace std::vector with std::array
array<int, NUM> con;
array<int, NUM> ok;

// ... (the rest of your code remains the same)

// Optimization 2: Move function calls outside loops
int main() {
  // ...
  // Move the re(M) function call outside the loop
  re(M);
  int t;
  for (int i = 0; i < M; i++) {
    re(t);
    if (t == 1) {
      // ...
    } else {
      // ...
    }
  }
}

// ... (the rest of your code remains the same)

// Optimization 3: Replace std::map with std::unordered_map
unordered_map<int, int> m;

// ... (the rest of your code remains the same)

// Optimization 4: Use std::endl instead of "\n"
pr(first);
cout << endl;  // Use std::endl instead of "\n"