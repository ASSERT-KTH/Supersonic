const int MAXN = 100005;
const int LOGN = 20;
int idx_in_path[MAXN];
ii path[2 * MAXN - 1];
// ...
ii ST[LOGN][2 * MAXN - 1];